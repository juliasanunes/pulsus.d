<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Listagem de Dispositivos - API da Pulsus</title>
</head>
<body>
    <h1>Listagem de Dispositivos</h1>
    <button onclick="listarDispositivos()">Listar Dispositivos</button>
    <div id="listaDispositivos"></div>

    <script>
        function listarDispositivos() {
            // Substitua 'seu_api_token_aqui' pelo seu token de APIS
            var apiToken = 'SFWLzKwTcwfgZ9P6dCxPuXmHhXWiRDCm2KtsCWztDovBj7bAJMRPqHmcs4de';

            // Constrói a URL para a requisição GET
            var url = 'https://api.pulsus.mobi/v1/devices?since_id=1&max_id=120&ids=%5B671%2C673%5D&extended_format=true';

            // Cria um objeto XMLHttpRequest
            var xhr = new XMLHttpRequest();

            // Configura a função de callback para quando a resposta for recebida
            xhr.onreadystatechange = function() {
                if (xhr.readyState === XMLHttpRequest.DONE) {
                    // Verifica o código de resposta
                    if (xhr.status === 200) {
                        // Requisição bem-sucedida, exibe os dispositivos
                        var response = JSON.parse(xhr.responseText);
                        exibirDispositivos(response);
                    } else {
                        // Exibe uma mensagem de erro em caso de falha
                        document.getElementById('listaDispositivos').innerText = 'Erro ao listar dispositivos';
                    }
                }
            };

            // Abre a conexão e envia a requisição GET
            xhr.open('GET', url, true);
            xhr.setRequestHeader('ApiToken', apiToken);
            xhr.send();
        }

        function exibirDispositivos(dispositivos) {
            var listaDispositivos = document.getElementById('listaDispositivos');
            listaDispositivos.innerHTML = ''; // Limpa o conteúdo anterior

            // Cria uma lista de dispositivos
            var ul = document.createElement('ul');
            dispositivos.forEach(function(dispositivo) {
                var li = document.createElement('li');
                li.textContent = 'ID: ' + dispositivo.id + ', Modelo: ' + dispositivo.modelo;
                ul.appendChild(li);
            });

            // Adiciona a lista de dispositivos ao elemento HTML
            listaDispositivos.appendChild(ul);
        }
    </script>
</body>
</html>
