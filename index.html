<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exemplo de Requisição para API de Força do Sinal</title>
</head>
<body>
    <h1>Exemplo de Requisição para API de Força do Sinal</h1>
    <button onclick="buscarDados()">Buscar Dados</button>
    <div id="dados"></div>

    <script>
        function buscarDados() {
            var apiToken = 'SFWLzKwTcwfgZ9P6dCxPuXmHhXWiRDCm2KtsCWztDovBj7bAJMRPqHmcs4de'; // Substitua pelo seu token de API válido

            var endpoint = 'https://api.pulsus.mobi/v2/signal_strengths?page=1&per_page=500&device_id=1'; // Substitua pela URL correta do endpoint
            var queryParams = '?page=1&per_page=500&device_id=1'; // Substitua os parâmetros conforme necessário

            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function() {
                if (xhr.readyState === XMLHttpRequest.DONE) {
                    if (xhr.status === 200) {
                        var response = JSON.parse(xhr.responseText);
                        exibirDados(response);
                    } else if (xhr.status === 401) {
                        exibirErro('Erro: Token inválido. Por favor, verifique seu token de API.');
                    } else if (xhr.status === 404) {
                        exibirErro('Erro: Recurso não encontrado.');
                    } else {
                        exibirErro('Erro interno do servidor. Por favor, tente novamente mais tarde.');
                    }
                }
            };

            xhr.open('GET', endpoint + queryParams, true);
            xhr.setRequestHeader('ApiToken', apiToken);
            xhr.send();
        }

        function exibirDados(dados) {
            var divDados = document.getElementById('dados');
            divDados.innerHTML = ''; // Limpa o conteúdo anterior

            var ul = document.createElement('ul');
            dados.forEach(function(item) {
                var li = document.createElement('li');
                li.textContent = 'ID do Dispositivo: ' + item.device_id + ', Nível do Sinal: ' + item.signal_strength;
                ul.appendChild(li);
            });

            divDados.appendChild(ul);
        }

        function exibirErro(mensagem) {
            var divDados = document.getElementById('dados');
            divDados.innerHTML = ''; // Limpa o conteúdo anterior

            var p = document.createElement('p');
            p.textContent = mensagem;
            divDados.appendChild(p);
        }
    </script>
</body>
</html>

